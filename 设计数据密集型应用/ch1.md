Designing Data-Intensive Application

# ch1 可靠性，可扩展性，可维护性

## 1 可靠性

- 造成错误的原因叫做故障（fault），能预料并应对故障的系统特性可称为容错（fault-tolerant）或韧性（resilient）
- 故障（fault）不同于失效（failure）。故障通常定义为系统的一部分状态偏离其规范，而失效则是系统作为一个整体停止向用户提供服务。故障的概率不可能降到零，因此最好设计容错机制以防因故障而导致失效。

### 硬件故障

### 软件错误

### 人为错误

- 以最小化犯错机会的方式设计系统。
- 将人们最容易犯错的地方与可能导致失效的地方解耦（decouple）。提供一个功能齐全的非生产环境沙箱（sandbox）
- 在各个层次进行彻底的测试，从单元测试、全系统集成测试到手动测试。
- 允许从人为错误中简单快速地恢复，以最大限度地减少失效情况带来的影响。 
- 配置详细和明确的监控，比如性能指标和错误率。

## 2 可扩展性

### 描述性能

- 增加负载参数，系统资源(CPU 内存 网络带宽）不变的情况下系统受到的影响。
- 增加负载参数，需要增加多少资源来保持性能不受到影响。

排队延迟（queueing delay）通常占了高百分位点处响应时间的很大一部分。由于服务器只能并行处理少量的事务（如受其CPU核数的限制），所以只要有少量缓慢的请求就能阻碍后续请求的处理，这种效应有时被称为头部阻塞（head-of-line blocking）

### 应对负载的方法

- 纵向扩展（scaling up）（垂直扩展（vertical scaling），转向更强大的机器）
- 横向扩展（scaling out）（水平扩展（horizontal scaling），将负载分布到多台小机器上）
- 跨多台机器分配负载也称为“无共享（shared-nothing）”架构

## 3 可维护性

### 可操作性（Operability）

便于运维团队保持系统平稳运行。

### 简单性（Simplicity）

从系统中消除尽可能多的复杂度（complexity），使新工程师也能轻松理解系统。

- 简化系统并不一定意味着减少功能；它也可以意味着消除额外的（accidental）的复杂度。消除额外复杂度的最好工具之一是抽象（abstraction）

### 可演化性（Evolability）

使工程师在未来能轻松地对系统进行更改，当需求变化时为新应用场景做适配。

- 敏捷（agile）开发为适应变化提供了一个框架。敏捷社区还开发了对在频繁变化的环境中开发软件很有帮助的技术工具和模式，如测试驱动开发（TDD, test-driven development）和重构（refactoring）。




